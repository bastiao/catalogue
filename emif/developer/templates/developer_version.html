{% extends 'base.html' %}
{% comment %}
# -*- coding: utf-8 -*-
# Copyright (C) 2014 Universidade de Aveiro, DETI/IEETA, Bioinformatics Group - http://bioinformatics.ua.pt/
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
{% load url from future %}
{% load extra_tags %}
{% load django_bootstrap_breadcrumbs %}
{% load crispy_forms_tags %}

{% block styleinclude %}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/dataTables.bootstrap.css">
{% endblock %}

{% block headextra %}
    <script src="{{ STATIC_URL}}js/jquery.dataTables.js"></script>
    <script src="{{ STATIC_URL}}js/dataTables.bootstrap.js"></script>
{% endblock %}
{% block breadcrumbs %}
        {{ block.super }}
        {% breadcrumb "Developer" "developer" %}
        {% breadcrumb plugin.name "developer/"|add:plugin.slug %}

        {% if version %}
            {% breadcrumb version.version version.version %}
        {% else %}
            {% breadcrumb "Add new Version" "" %}
        {% endif %}
{% endblock %}

{% block toolbar %}
    {% include "reusable_blocks/menu_toolbar.html" with collapse=collapseall %}
{% endblock %}

{% block content %}
    <div class="row">
        <div class="span12">
        <form class="form-horizontal" method="post">
        {%csrf_token%}
            <h3>Version Details</h3>
            <div class="well">
                    <div class="control-group">
                        <label class="control-label" for="id-version">Version</label>
                        <div class="controls controls-row">
                          <input name="version" class="span6" id="id-version" value="{{version.version}}"
                          type="number" placeholder="Version number" />&nbsp;
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="id-remote">Is Remote ?</label>
                        <div class="controls controls-row">
                          <input name="is_remote" id="id-remote" value="{{version.is_remote}}" type="checkbox" />&nbsp;
                        </div>
                    </div>
                    <div id="remote_path" class="{% if not version.is_remote %}hide{%endif%} control-group">
                        <label class="control-label" for="id-remote">Path</label>
                        <div class="controls controls-row">
                          <input class="span6" id="id-path" value="{% if not version.is_remote %}{{version.path}}{%endif%}" type="text" />&nbsp;
                        </div>
                    </div>
                    <div id="local_editor" class="{% if version.is_remote %}hide{%endif%}">
                        <pre style="height: 300px; font-size: 14px;" id="editor">
{% if version.is_remote or version.path == '' %}
var confs = {
            name: "New Global Widget",
            width: 2,
            height: 1,
            x: 6,
            y: 6
};
var plugin = function(self){
        self.content = 'Hello world DUDE 2';
};
{% else %}
{{version.path}}
{%endif %}
                        </pre>
                        <input name="data" id="id-code" class="hide" type="text" />
                    </div>

            </div>
            <button type="submit" id="save-plugin" class="pull-right btn btn-primary span3"
            type="submit" ><i class="fa fa-inverse fa-floppy-o"></i>&nbsp; Save Version </button>

        </form>

            <h3>Live Preview</h3>
            <div class="well">
                <center>
                <div class="row" id="live-preview">
                    Write some code, or load it from the remote location, to try the widget live.
                    <center>
                    <iframe class="span11">
                      <p>Your browser does not support iframes.</p>
                    </iframe>
                    </center>
                </div>
                </center>
            </div>
        </div>
    </div>
{% endblock content %}

{% block scriptextraincludes %}
    <script src="{{STATIC_URL}}js/vendor/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/github");
        editor.getSession().setMode("ace/mode/javascript");
    </script>
    <script type="text/javascript" src="{{STATIC_URL}}js/emif.developer_version.js" />

{% endblock %}
