{% load extra_tags %}

<div class="scroll_class" style="position: relative; width: 100%;">
    <table class="table table-striped table-bordered" id="table_databases">
	<thead>
		<tr>
      {% for t in titles %}
        <th {% if forloop.counter == 1 %} id="nametag" {% endif %} class="colheader minwidth250" title="{{ t|removehs }}">{{t|truncate|removehs}} </th>

      {% endfor %}
        </tr>
        <tr>
            {% for t in titles %}
            <th style="background-color: #eee !important; padding: 4px;">
                <input class="filter_input finput{{forloop.counter0}}" placeholder="Filter" type="text" />
            </th>
            {% endfor %}
        </tr>
	</thead>
    <tbody>
      {% for ans in answers %}
        <tr>
          <td>{{ ans.0 }}</td>
          {% for a in ans.1 %}
            {% if a.1 == 'publication' %}
            {% elif a.1|captioned %}
              <td title="{{a.0|striptags}}"> {{ a.0|truncate }}</td>
            {% else %}
              <td>{{a.0}}</td>{% endif %}
          {% endfor %}
        </tr>
      {% endfor %}
      </tbody>
      </table>
</div>
<script type="application/javascript">
$(function() {

    var table = $('#table_databases').DataTable( {
        "scrollY": "460px",
        "scrollX": "100%",
        "scrollCollapse": true,
        "paging": false,
        "orderCellsTop": true,
        "sDom": '<"top">rt<"bottom"ilJp><"clear">',
    } );

    new $.fn.dataTable.FixedColumns( table );

    table.columns().eq( 0 ).each( function ( colIdx ) {

        $('.finput'+colIdx).on( 'keyup change', function () {
            table
                .column( colIdx )
                .search( this.value )
                .draw();
        } );
    } );

    //table.colResize();

});
</script>
